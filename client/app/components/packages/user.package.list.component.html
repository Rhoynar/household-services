<top-header></top-header>


<page-title [pagetitle]="pagetitle"></page-title>
<mid-header></mid-header>
<!--inner-mid-sec-->
<div class="inner-mid-sec white-bg">
  <div class="container">
    <div class="row">


      <div class="choose-the-package">
        <h3 class="bdr-heading">Choose the package</h3>

        <span *ngFor="let package of availablePackages">
          <div class="col-sm-4" *ngIf="selectedPackage=='' || selectedPackage==package._id">
            <div class="package_deatil">
              <h3>
                {{package.title}}
                <span>${{package.price}} / Service</span>
        </h3>
        <ul class="rules_info">

          <li *ngFor="let feature of package.features">{{feature}}</li>
        </ul>
        <div class="Select_package">
          <div class="radio-block">
            <input type="radio" name="selectedPackage" [(ngModel)]="selectedPackage" value="{{package._id}}" id="package_{{package._id}}"
              class="css-checkbox" />
            <label for="package_{{package._id}}">Select the package</label>
          </div>
        </div>
      </div>
    </div>
    </span>


    <div class="col-sm-6" *ngIf="selectedPackage!='' && cardsvisible==false">


      <div class="form_block">
        <h3>Additional</h3>
        <form novalidate #form="ngForm" name="packagePrefrence" id="packagePrefrence" (ngSubmit)="submitForm(form.value)">
          <alert [alertType]="'additional-form'"></alert>
          <div class="form-group">
            <label class="input-heading">Prefered Date :</label>
            <div class="input-box">

              <my-date-picker [selDate]="selDate" [options]="myDatePickerOptions" (dateChanged)="onDateChanged($event)" name="preferedDate"
                [(ngModel)]="preferedDate" required></my-date-picker>
              <!--<div style="position: absolute; z-index:10; min-height:290px;">
                      <datepicker name="bhata" [(ngModel)]="preferedDate" [minDate]="minDate" [showWeeks]="true" [dateDisabled]="dateDisabled"></datepicker>
                    </div>-->

            </div>
          </div>

          <div class="form-group">
            <label class="input-heading">Service :</label>
            <div class="input-box">
              <div class="radio-block">
                <input type="radio" required id="service_once" [(ngModel)]="preferedType" name="frequency" value="once" class="css-checkbox"
                />
                <label for="service_once">Only Once</label>
              </div>
              <div class="radio-block">
                <input type="radio" required id="service_reccur" [(ngModel)]="preferedType" name="frequency" value="reoccur" class="css-checkbox"
                />
                <label for="service_reccur">Reccuring</label>
              </div>

            </div>
          </div>

          <div class="form-group">
            <label class="input-heading">Additional Instruction :</label>
            <div class="input-box">
              <textarea required class="input-fill msg" [(ngModel)]="additionalInstruction" name="additionalInstruction"></textarea>
            </div>
          </div>

          <div class="form-group btn-wrp">
            <button class="sub-btn">Continue</button>
            <button type="button" (click)="cancelSelection();" class="sub-btn cancel-btn">Cancel</button>
          </div>


        </form>
      </div>




    </div>






    <div class="panel col-sm-6" *ngIf="selectedPackage!='' && cardsvisible==true">

      <div class="panel-heading">
        <h3 class="panel-title">Cards</h3>
        <button type="button" class="btn btn-primary" (click)="cancelPurchase();">Cancel</button>
      </div>
      <div class="panel-body">
        <!--<div class="cg-busy" *ngIf="processingCard">
          <div class="cg-busy cg-busy-backdrop"></div>
          <div class="cg-busy-div">
          </div>
        </div>-->
        <ul class="list-group list-group-dividered list-group-full">
          <li class="list-group-item col-md-12" *ngFor="let eachCard of userCreditCards">

            <div class="col-md-12">
              <small class="label label-round label-info pull-right">
                    <input type="radio" name="useCardId"  [(ngModel)]="useCardId" value="{{eachCard.id}}"/>
                    </small>
              <p><a class="hightlight" href="javascript:void(0)">{{eachCard.id}}</a>

              </p>
              <small class="col-md-12">Card Number :-
                      <span>[************{{eachCard.last4}}]</span>
                  </small>
              <small class="col-md-12">Expiry:-
                      <span>{{eachCard.exp_month}}/{{eachCard.exp_year}}</span>
                  </small>
              <div class="col-md-12" *ngIf="useCardId==eachCard.id">
                <button type="button" [disabled]="processingCard" class="btn btn-primary" (click)="makePayment(eachCard)">Pay</button>
              </div>
            </div>

          </li>
          <li class="list-group-item col-md-12">
            <h3>
              Other Card
              <small class="label label-round label-info pull-right">
                    <input type="radio" name="useCardId"  [(ngModel)]="useCardId" value="newcard"/>
                    </small>
            </h3>

            <div class="col-md-12">

              <alert [alertType]="'card-error'"></alert>


              <div class="form-group">
                <label class="control-label">Card Number :</label>

                <input class="form-control" [(ngModel)]="cardNumber" name="card-number" type="text" size="20" data-stripe="number">

              </div>

              <div class="form-group">
                <label class="control-label">Expiration (MM/YY):</label>
                <div class="row">
                  <div class="col-md-5">
                    <input class="form-control" [(ngModel)]="expiryMonth" name="expiry-month" type="text" size="2" data-stripe="exp_month">
                  </div>

                  <span class="col-md-1">/</span>

                  <div class="col-md-5">
                    <input class="form-control" [(ngModel)]="expiryYear" name="expiry-year" type="text" size="2" data-stripe="exp_year">
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="control-label">CVC:</label>

                <input class="form-control" [(ngModel)]="cvc" name="cvc" type="text" size="4" data-stripe="cvc">

              </div>
              <div class="form-group" *ngIf="useCardId=='newcard'">

                <button type="button" class="btn btn-primary" [disabled]="processingCard" (click)="payWithNewCard(false);">Pay</button>
                <button type="button" class="btn btn-primary" [disabled]="processingCard" (click)="payWithNewCard(true);">Pay And Save Card</button>

              </div>

            </div>

          </li>
        </ul>
      </div>




    </div>







    <div class="clearfix"></div>

  </div>




</div>
</div>

</div>

<!--inner-mid-sec-->

<!--footer-section-->
<footer></footer>
<!--end-footer-section-->