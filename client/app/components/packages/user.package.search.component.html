<top-header></top-header>


<page-title [pagetitle]="pagetitle"></page-title>
<mid-header *ngIf="loggedIn"></mid-header>
<!--inner-mid-sec-->
<div class="inner-mid-sec white-bg">
  <div class="container">
    <div class="row">


      <div class="choose-the-package">
        <h3 class="bdr-heading">Choose the package</h3>

        <span *ngFor="let package of availablePackages; let i=index;">
          <div class="col-sm-4" *ngIf="selectedPackage=='' || selectedPackage==package._id">
            <div class="package_deatil">
              <h3>
                {{package.title}}
                <!--<span>${{package.price}} / Service</span>-->
              </h3>
              <ul class="rules_info">
                
                <li *ngFor="let feature of package.features">{{feature}}</li>
              </ul>
              <div class="Select_package">
                <div class="">
                  <input type="radio" (click)="setSelectedPackageDetail(i);" name="selectedPackage" [(ngModel)]="selectedPackage" value="{{package._id}}" id="package_{{package._id}}"
                    class="css-checkbox" />
                  <label for="package_{{package._id}}">Select the package</label>
                </div>
              </div>
            </div>
          </div>
        </span>


        <div class="col-sm-6" *ngIf="selectedPackage!='' && cardsvisible==false">
          <div class="community-table">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <th>Timing</th>
                      <th align="center">Morning</th>
                      <th align="center">Noon</th>
                      <th align="center">Evening</th>
                    </tr>
                    <tr class="row-bg">
                      <td>Monday</td>
                      <td align="center">
                        <input id="packageType_mon_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.mon_mor_price,'mon','mor')" value="mon_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_mon_mor_price">{{packageCalender?.mon_mor_price| currency:'USD':true}}</label>
                      </td>
                      <td align="center">
                        <input id="packageType_mon_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.mon_noon_price,'mon','noon')" value="mon_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_mon_noon_price">{{packageCalender?.mon_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_mon_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.mon_eve_price,'mon','eve')" value="mon_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_mon_eve_price">{{packageCalender?.mon_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Tuesday</td>
                      <td align="center">
                        <input id="packageType_tue_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.tue_mor_price,'tue','mor')" value="tue_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_tue_mor_price">{{packageCalender?.tue_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_tue_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.tue_noon_price,'tue','noon')" value="tue_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_tue_noon_price">{{packageCalender?.tue_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_tue_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.tue_eve_price,'tue','eve')" value="tue_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_tue_eve_price">{{packageCalender?.tue_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Wednesday</td>
                      <td align="center">
                        <input id="packageType_wed_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.wed_mor_price,'wed','mor')" value="wed_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_wed_mor_price">{{packageCalender?.wed_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_wed_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.wed_noon_price,'wed','noon')" value="wed_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_wed_noon_price">{{packageCalender?.wed_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_wed_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.wed_eve_price,'wed','eve')" value="wed_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_wed_eve_price">{{packageCalender?.wed_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Thursday</td>
                      <td align="center">
                        <input id="packageType_thur_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.thur_mor_price,'thur','mor')" value="thur_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_thur_mor_price">{{packageCalender?.thur_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_thur_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.thur_noon_price,'thur','noon')" value="thur_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_thur_noon_price">{{packageCalender?.thur_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_thur_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.thur_eve_price,'thur','eve')" value="thur_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_thur_eve_price">{{packageCalender?.thur_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Friday</td>
                      <td align="center">
                        <input id="packageType_fri_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.fri_mor_price,'fri','mor')" value="fri_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_fri_mor_price">{{packageCalender?.fri_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_fri_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.fri_noon_price,'fri','noon')" value="fri_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_fri_noon_price">{{packageCalender?.fri_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_fri_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.fri_eve_price,'fri','eve')" value="fri_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_fri_eve_price">{{packageCalender?.fri_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Saturday</td>
                      <td align="center">
                        <input id="packageType_sat_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sat_mor_price,'sat','mor')" value="sat_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sat_mor_price">{{packageCalender?.sat_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_sat_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sat_noon_price,'sat','noon')" value="sat_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sat_noon_price">{{packageCalender?.sat_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_sat_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sat_eve_price,'sat','eve')" value="sat_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sat_eve_price">{{packageCalender?.sat_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                    <tr class="row-bg">
                      <td>Sunday</td>
                      <td align="center">
                        <input id="packageType_sun_mor_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sun_mor_price,'sun','mor')" value="sun_mor_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sun_mor_price">{{packageCalender?.sun_mor_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_sun_noon_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sun_noon_price,'sun','noon')" value="sun_noon_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sun_noon_price">{{packageCalender?.sun_noon_price| currency:'USD':true}}</label>
                        </td>
                      <td align="center">
                        <input id="packageType_sun_eve_price" type="radio" [(ngModel)]="packagePriceType" (click)="setPriceDetails(packageCalender?.sun_eve_price,'sun','eve')" value="sun_eve_price" name="packagePriceType" class="css-checkbox" />
                        <label for="packageType_sun_eve_price">{{packageCalender?.sun_eve_price| currency:'USD':true}}</label>
                        </td>
                    </tr>
                  </table>
                </div>

          <div class="form_block" *ngIf="packagePrice!=''">
            <h3>Additional</h3>
            <form novalidate #form="ngForm" name="packagePrefrence" id="packagePrefrence" (ngSubmit)="submitForm(form.value)">
              <alert [alertType]="'additional-form'"></alert>
              
              <div class="form-group">
                <label class="input-heading">Prefered Date:</label>
                <div class="input-box">
                  <!--(calendarViewChanged)="onCalendarViewChanged($event)"-->
                  <my-date-picker [selDate]="selDate"  [options]="myDatePickerOptions"
                (dateChanged)="onDateChanged($event)"  name="preferedDate" [(ngModel)]="preferedDate" required></my-date-picker>
                    <!--<div style="position: absolute; z-index:10; min-height:290px;">
                      <datepicker name="bhata" [(ngModel)]="preferedDate" [minDate]="minDate" [showWeeks]="true" [dateDisabled]="dateDisabled"></datepicker>
                    </div>-->

                </div>
              </div>
              <div class="form-group">
                <!--{{selDate|json}}-->
                <input type="hidden" [(ngModel)]="packagePriceType" name="packagePriceType"/>
                <input type="hidden" [(ngModel)]="packagePrice" name="packagePrice"/>
                <input type="hidden" [(ngModel)]="packageDay" name="packageDay"/>
                <input type="hidden" [(ngModel)]="packageMeridian" name="packageMeridian"/>
              </div>
              <!--<div class="form-group">
                <label class="input-heading">Service :</label>
                <div class="input-box">
                  <div class="radio-block">
                    <input type="radio" required id="service_once" [(ngModel)]="preferedType" name="frequency" value="once" class="css-checkbox" />
                    <label for="service_once">Only Once</label>
                  </div>
                  <div class="radio-block">
                    <input type="radio" required id="service_reccur" [(ngModel)]="preferedType" name="frequency" value="reoccur" class="css-checkbox" />
                    <label for="service_reccur">Reccuring</label>
                  </div>

                </div>
              </div>-->

              <div class="form-group">
                <label class="input-heading">Instructions:</label>
                <div class="input-box">
                  <textarea required class="input-fill msg" [(ngModel)]="additionalInstruction" name="additionalInstruction"></textarea>
                </div>
              </div>

              <div class="form-group btn-wrp">
                <button class="sub-btn">Continue</button>
                <button type="button" (click)="cancelSelection();" class="sub-btn cancel-btn">Cancel</button>
              </div>


            </form>
          </div>




        </div>

        <div class="panel col-sm-6" *ngIf="selectedPackage!='' && cardsvisible==true">

      <div class="panel-heading">
        <h3 class="panel-title">Cards</h3>
        <button type="button" class="btn btn-primary" (click)="cancelPurchase();">Cancel</button>
      </div>
      <div class="panel-body">
        <!--<div class="cg-busy" *ngIf="processingCard">
          <div class="cg-busy cg-busy-backdrop"></div>
          <div class="cg-busy-div">
          </div>
        </div>-->
        <ul class="list-group list-group-dividered list-group-full">
          <li class="list-group-item col-md-12" *ngFor="let eachCard of userCreditCards">

            <div class="col-md-12">
              <small class="label label-round label-info pull-right">
                    <input type="radio" name="useCardId"  [(ngModel)]="useCardId" value="{{eachCard.id}}"/>
                    </small>
              <p><a class="hightlight" href="javascript:void(0)">{{eachCard.id}}</a>

              </p>
              <small class="col-md-12">Card Number :-
                      <span>[************{{eachCard.last4}}]</span>
                  </small>
              <small class="col-md-12">Expiry:-
                      <span>{{eachCard.exp_month}}/{{eachCard.exp_year}}</span>
                  </small>
              <div class="col-md-12" *ngIf="useCardId==eachCard.id">
                <button type="button" [disabled]="processingCard" class="btn btn-primary" (click)="makePayment(eachCard)">Pay</button>
              </div>
            </div>

          </li>
          <li class="list-group-item col-md-12">
            <h3>
              Other Card
              <small class="label label-round label-info pull-right">
                    <input type="radio" name="useCardId"  [(ngModel)]="useCardId" value="newcard"/>
                    </small>
            </h3>

            <div class="col-md-12">

              <alert [alertType]="'card-error'"></alert>


              <div class="form-group">
                <label class="control-label">Card Number :</label>

                <input class="form-control" [(ngModel)]="cardNumber" name="card-number" type="text" size="20" data-stripe="number">

              </div>

              <div class="form-group">
                <label class="control-label">Expiration (MM/YY):</label>
                <div class="row">
                  <div class="col-md-5">
                    <input class="form-control" [(ngModel)]="expiryMonth" name="expiry-month" type="text" size="2" data-stripe="exp_month">
                  </div>

                  <span class="col-md-1">/</span>

                  <div class="col-md-5">
                    <input class="form-control" [(ngModel)]="expiryYear" name="expiry-year" type="text" size="2" data-stripe="exp_year">
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="control-label">CVC:</label>

                <input class="form-control" [(ngModel)]="cvc" name="cvc" type="text" size="4" data-stripe="cvc">

              </div>
              <div class="form-group" *ngIf="useCardId=='newcard'">

                <button type="button" class="btn btn-primary" [disabled]="processingCard" (click)="payWithNewCard(false);">Pay</button>
                <button type="button" class="btn btn-primary" [disabled]="processingCard" (click)="payWithNewCard(true);">Pay And Save Card</button>

              </div>

            </div>

          </li>
        </ul>
      </div>




    </div>

        <div class="clearfix"></div>

      </div>




    </div>
  </div>

</div>

<!--inner-mid-sec-->

<!--footer-section-->
<footer></footer>
<!--end-footer-section-->